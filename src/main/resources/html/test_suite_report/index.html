<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Filibuster Test Suite Report</title>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" src="./summary.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
            crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

    <style>
        body {
            font-size: 85%;

            font-family: 'Gill Sans',
            'Gill Sans MT', ' Calibri',
            'Trebuchet MS', 'sans-serif';

            background-color: white;
        }

        table {
            margin: 0 auto;
            font-size: large;
            table-layout: fixed;
        }

        h1 {
            color: black;
            font-size: 1.8em;
        }

        div {
            text-align: center;
            margin: 0 auto;
            width: 500px;
            padding-bottom: 0;
        }

        .fail {
            font-weight: bold;
            color: red;
        }

        .pass {
            font-weight: bold;
            color: green;
        }

        textarea {
            width: 100%;
            height: 150px;
            padding: 12px 20px;
            box-sizing: border-box;
            border: 2px solid #ccc;
            border-radius: 4px;
            background-color: #f8f8f8;
            font-size: 16px;
            resize: none;
        }

        th {
            background-color: lightgrey;
        }

        th,
        td {
            font-weight: bold;
            padding: 10px;
            vertical-align: top;
        }

        td {
            font-weight: lighter;
        }

        tr {
            font-size: 0.8em;
        }

        tr.pass {
            background-color: lightgreen;
            text-align: center;
        }

        tr.collapsable {
            display: none;
        }

        tr.fail {
            background-color: lightcoral;
            text-align: center;
        }

        td.warning {
            vertical-align: top;
            font-weight: 400;
        }

        tr.warning {
            font-size: 14px;
            background-color: lightyellow;
        }

        td.right {
            text-align: right;
        }

        span.verysmall {
            font-size: 10px;
            color: black;
        }

        td.generated_id {
            text-align: center;
        }

        td.method, td.generated_id {
            padding: 12px 20px;
            font-family: 'Inconsolata';
            font-size: 18px;
            font-weight: 500;
        }

        .class_name {
            padding: 0;
            margin-bottom: 10px;
            font-family: 'Inconsolata';
            font-size: 18px;
            font-weight: 500;
            width: 100%;
            text-align: left;
        }

        div.summary {
            width: 100%;
            float: left;
        }

        table.reports {
            float: left;
            width: 100%;
        }

        div.container-fluid {
            float: left;
            width: 100%;
        }

        .small {
            font-size: small;
        }

        .verysmall {
            font-size: 10px;
        }

        .server {
            float: left;
            margin-bottom: 5px;
        }

        h1 {
            margin-bottom: 0px;
        }

        .arrow {
            border: solid black;
            border-width: 0 3px 3px 0;
            display: inline-block;
            padding: 3px;
        }

        .right {
            transform: rotate(-45deg);
            -webkit-transform: rotate(-45deg);
        }

        .left {
            transform: rotate(135deg);
            -webkit-transform: rotate(135deg);
        }

        .up {
            transform: rotate(-135deg);
            -webkit-transform: rotate(-135deg);
        }

        .down {
            transform: rotate(45deg);
            -webkit-transform: rotate(45deg);
        }
    </style>
</head>

<body>
<section>
    <h1 id='status'>Filibuster Test Suite Report</h1>
    <div class="container-fluid">
        <span class="server">
    <a href="server.html" target="filibuster_frame" class="verysmall">Show Server Invocation Information</a>
    </span>
        <div id="summary" class="summary">
            <table id="reports" class="reports">
                <tr>
                    <th class="text-center">Tests<span id="total" class="small"></span><a class="verysmall" href="#"
                                                                                          title="Click to expand or collapse"
                                                                                          onClick="togglePasses();">&nbsp;&nbsp;<i
                            id="dropdownbtn" class="arrow down"></i></a>
                    </th>
                </tr>
            </table>
        </div>
    </div>
    <div class="container-fluid">
        <iframe id="filibuster_frame" frameborder="0" scrolling="auto" name="filibuster_frame" height="800px"
                width="100%"></iframe>
    </div>


    <script>
        function togglePasses() {
            $('tr.collapsable').toggle();
            if($( "#dropdownbtn" ).hasClass( "down" ))
            {
                $( "#dropdownbtn" ).removeClass("down");
                $( "#dropdownbtn" ).addClass("up");
            }
            else
            {
                $( "#dropdownbtn" ).removeClass("up");
                $( "#dropdownbtn" ).addClass("down");
            }
        }

        $(document).ready(function () {
            console.log(summary);

            $('#total').html("(" + summary.reports.length + ")");

            for (let i in summary.reports) {
                let report = summary.reports[i];
                console.log(report);

                var row = '';

                if (i == 0) {
                    $('#filibuster_frame').attr('src', report.path)
                }
                if (report.status === true) {
                    row += '<tr class="pass collapsable">';
                } else {
                    row += '<tr class="fail collapsable">';
                }

                row += '<td>';
                row += `<a target="filibuster_frame" href=${report.path}#summary>${report.test_name}</a>`;

                row += '</td>';
                row += '</tr>';

                $('#reports').append(row);
                togglePasses()
            }
        });
    </script>
</section>
</body>

</html>
